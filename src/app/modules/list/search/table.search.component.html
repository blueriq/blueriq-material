<div *ngIf="search.enabled" bqKey bqClasses class="search">
  <mat-form-field
    *ngIf="fieldIsVisible()"
    appearance="standard"
    floatLabel="auto"
    style="flex: 70; max-width: 70%"
    [@slideIn]="'*'"
    (@slideIn.done)="focusField()">
    <mat-chip-list #chipList>
      <mat-chip
        *ngFor="let searchTerm of searchTerms"
        [selectable]="false"
        [removable]="true"
        (removed)="remove(searchTerm)">
        {{searchTerm}}
        <mat-icon matChipRemove>cancel</mat-icon>
      </mat-chip>
      <input
        type="text"
        placeholder="{{search.caption}}"
        [matChipInputFor]="chipList"
        [matChipInputSeparatorKeyCodes]="separatorKeyCodes"
        [matChipInputAddOnBlur]="true"
        (matChipInputTokenEnd)="add($event)"
        #inputField>
    </mat-chip-list>
  </mat-form-field>
  <div class="button-wrapper">
    <button
      type="button"
      mat-icon-button
      (click)="toggle()"
      [color]="opened ? 'default' : 'primary'">
      <mat-icon *ngIf="!opened">search</mat-icon>
      <mat-icon *ngIf="opened">clear</mat-icon>
    </button>
  </div>
</div>
